\chapter{Conclusão} 
%TODO - Esse capitulo deve ter um texto q convenca o leitor
% de que a aplicacao do MVP melhorou a qualidade do codigo quanto a manutenib
% pois essa foi a promessa no cap 1 (objetivos).essa eh a defesa q vc devera fazer perante a banca.

\section{Discussão dos Resultados} 
%TODO - Sinto falta de uma figura (diagrama) (Em andamento\ldots)
% que ilustre interações entre as classes nas camadas que vc cita ao longo  da
% apresentacao dos resultados... pode ser um diagrama de classes com separacao entre as camadas por pacotes
As classes destinadas à implementação da interface no framework android fornecem
acceso a recursos que servem para implementação de responsabilidades não
relacionadas com a interface. Essa característica do framework android leva à
implementação da camada de View com diversas responsabilidades que não são
inerentes à interação com o usuário. Isso dificultou a refatoração, pois as
classes que exercem o papel de Presenter necessitam interagir com as classes de
View para acessar esses recursos, além de atualizar o estado da View. O uso do
padrão de injeção de
dependência\footnote{Padrão
de projeto onde um objeto recebe as referências para as suas dependências sem
conhecer os processo de contrução das mesmas.
\url{http://en.wikipedia.org/wiki/Dependency_injection}}
pode ser aplicado para acessar esses recursos e serviços sem a necessidade de
interação com a classe de View.


\begin{figure}[h]
	\centering
	\label{fig:classes_iteracao3}
	\includegraphics[scale=0.5]{img/classes_iteracao3}
	\caption{Pacote após refatoração/Fonte: Próprio autor}
\end{figure}


Ao usar o padrão MVP, a granularidade dos métodos aumentou pois cada um dos
componentes implementaram uma parte do caso de uso aumentando o números de
métodos que se reflete na métrica WMC, isso afeta também a métrica RFC pois
esses métodos estão relacionados entre si, aumentando a troca de mensagens entre
a view e o presenter. Um ponto positivo sobre isso é o fato de que métodos 
complexos com muitas linhas de código foram desmembrados em métodos menores e
mais simples, implementados tanto na View como no Presenter.

Houve diminuição na métrica CBO nas classes alteradas pois diversas
responsabilidades que utilizam essas dependências foram movidas para a classe de
Presenter. Analisando de forma geral, essas dependências permanecem no pacote
além de ser criado mais um acoplamento entre a View e a nova classe Presenter.
Os experimentos demonstraram que a aplicação do padrão MVP promoveu de forma
significativa maior coesão no aplicativo. 
%TODO - Descrever em que indicadores
% isso ocorreu... citar aqui e comentar um pouco. trabalhe o texto

A métrica WMC está relacionada com as métricas DIT e NOC. Como houve pouca
variação no DIT e nenhuma variação no NOC o aumento da WMC não tem impacto
relevante. Entretanto a métrica RFC aumentou indicando maior complexidade. Os
resultaddos mostram que isso se deve à melhora da coesão do código demonstrado pela
diminiução da métrica LCOM. Comforme um software é desenvolvido novas classes e
troca de menssagens são implementadas afetando as métricas WMC e RFC. Como não
houve uma refatoração mais extensiva do projeto não é possível determinar
valores de referência para as métricas. Não é possível relacionar diretamente a
métrica CBO com base na variação dos resultados para esta métrica, apesar de
que, os valores se mantiveram abaixo dos encontrados da versão de referência.
Isso requer mais estudos abordando outros padrões de projeto. 

Falta acrescentar isso:
 1 - Não existe valores ideais para as métricas!
 
 2 - As métricas de CK servem para identificar anomalias que devem ser
 analisadas caso a caso!
 
 3 - A partir do ponto em que várias classes são refatoradas é
 possível definir um valor para servir de parametro!


A métrica mais afetada pelo uso do padrão MVP no projeto foi a LCOM como
pode ser observado na figura \ref{fig:allmetrics}.

\begin{figure}[!h]
	\centering
	\includegraphics{img/allmetrics}
	\caption{Variação das métricas ao longo das iterações/Fonte: Próprio autor}
	\label{fig:allmetrics}
\end{figure}


4 - CK Destacam que para aumentar a coesão, a criação de novos
 metodos(WMC,RFC) e novos componentes (CBO) é inevitável.


Portanto, a arquitetura proposta melhorou a qualidade do objeto de estudo porque
promoveu maior coesão, diminuindo a complexidade.

 
\section{Trabalhos Futuros}

Existem outros padrões de projetos para o desenvolvimento da camada de
apresentação de um software que não foram analisados nesse trabalho, a saber: 
MVVM, MVP-VM, MVPC. Essas variações no padrão MVC surgiram em contextos
diversificados e podem agregar algum benefício à qualidade do aplicativo.
Este trabalho não aborda o impacto do padrão MVP em outras métricas de qualidade
de código.
Não foi feita uma avaliação dos impactos na performance do aplicativo devido ao
uso do padrão MVP. A inclusão de mais objetos interagindo trocando mensagens
pode depreciar a performance, levando-se em consideração sua execução em
ambientes mais restritos, como no caso de um aparelho móvel.